(function(e){var t,n;return t={scriptId:"TechModuleGridScript",elementId:"DevPixelGrid",classWhite:"bPixelGrid__mColor_white",storageEngine:"sessionStorage",storage:null,showed:!1,coords:{top:0,left:0},opacity:.2,options:{stepWidth:10,stepHeight:10,subdivision:!1},init:function(e){var t,n,r;r=$("#"+this.scriptId),this.isJSONAvailable()&&typeof opt!="undefined"&&(e=r.data("options"));if(typeof e!==void 0)for(n in e)t=e[n],this.options[n]=t;return this.createGrid(),!0},createGrid:function(){return this.container=$("<div></div>"),this.container.attr("id",this.elementId),this.container.css({display:"block",position:"absolute",width:"100%",height:"100%",zIndex:1e3,pointerEvents:"none",top:0,left:0}),this.el=$("<div></div>"),this.el.css({display:"none",position:"relative",width:"100%",height:"100%",opacity:this.opacity,pointerEvents:"none",top:0,left:0}),this.createRows(),this.createCols(),this.container.append(this.el),$("body").append(this.container)},createRows:function(){var e,t,n,r;this.height=$(document.documentElement).outerHeight(),t=Math.floor(this.height/this.options.stepHeight);for(n=r=0;0<=t?r<=t:r>=t;n=0<=t?++r:--r)e=$("<div></div>"),e.css({position:"absolute",width:"100%",height:this.options.stepHeight-1+"px",top:n*this.options.stepHeight+"px",left:0,borderTop:"1px solid black"}),this.el.append(e);return e.css("borderBottom","1px solid black")},createCols:function(){var e,t,n,r;this.width=$(document.documentElement).outerWidth(),t=Math.floor(this.width/this.options.stepWidth);for(n=r=0;0<=t?r<=t:r>=t;n=0<=t?++r:--r)e=$("<div></div>"),e.css({position:"absolute",width:this.options.stepWidth-1+"px",height:this.height+"px",top:0,left:n*this.options.stepWidth+"px",borderLeft:"1px solid black"}),this.el.append(e);return e.css("borderRight","1px solid black")},showGrid:function(){this.el.show(),this.showed=!0;if(this.isStorageAvailable())return this.storage.setItem("dev-pixel-grid-showed","enabled")},hideGrid:function(){this.el.hide(),this.showed=!1;if(this.isStorageAvailable())return this.storage.setItem("dev-pixel-grid-showed","disabled")},toggleVisible:function(){return this.showed?this.hideGrid():this.showGrid()},toggleBlackWhite:function(){this.isBlack?$("div",this.el).css("borderColor","black"):$("div",this.el).css("borderColor","white"),this.isBlack=!this.isBlack;if(this.isStorageAvailable())return this.storage.setItem("dev-pixel-grid-black",this.isBlack)},updateToCoords:function(){this.el.css({marginTop:this.coords.top,marginLeft:this.coords.left});if(this.isStorageAvailable()&&this.isJSONAvailable())return this.storage.setItem("dev-pixel-grid-coords",JSON.stringify({top:this.coords.top,left:this.coords.left}))},move:function(e,t){return this.coords.top=t,this.coords.left=e,this.updateToCoords()},moveTop:function(){return this.move(this.coords.left,this.coords.top-1)},moveBottom:function(){return this.move(this.coords.left,this.coords.top+1)},moveLeft:function(){return this.move(this.coords.left-1,this.coords.top)},moveRight:function(){return this.move(this.coords.left+1,this.coords.top)},resetPosition:function(){return this.move(0,0)},moreTransparency:function(){return this.opacity<.2?!1:(this.opacity-=.1,this.updateOpacity())},lessTransparency:function(){return this.opacity>.9?!1:(this.opacity+=.1,this.updateOpacity())},updateOpacity:function(){return this.storage.setItem("dev-pixel-grid-opacity",this.opacity),this.el.css("opacity",this.opacity)},checkStorage:function(){var e,t;return this.isJSONAvailable()&&(this.coords=(t=JSON.parse(this.storage.getItem("dev-pixel-grid-coords")))!=null?t:this.coords,this.updateToCoords()),this.isBlack=this.storage.getItem("dev-pixel-grid-black")!=="true",this.toggleBlackWhite(),this.storage.getItem("dev-pixel-grid-showed")==="enabled"&&this.showGrid(),e=parseFloat(this.storage.getItem("dev-pixel-grid-opacity")),isNaN(e&&e>0)||(this.opacity=e),this.updateOpacity()},enableHotKeys:function(){var e=this;return key("⌥+⇧+p",function(){return e.toggleVisible()}),key("⌥+⇧+o",function(){return e.toggleBlackWhite()}),key("⌥+⇧+=",function(){return e.lessTransparency()}),key("⌥+⇧+-",function(){return e.moreTransparency()}),key("⌥+⇧+up",function(){return e.moveTop()}),key("⌥+⇧+down",function(){return e.moveBottom()}),key("⌥+⇧+left",function(){return e.moveLeft()}),key("⌥+⇧+right",function(){return e.moveRight()}),key("⌥+⇧+r",function(){return e.resetPosition()})},isJSONAvailable:function(){return window.JSON!==null},isKeymasterAvailable:function(){return typeof key!="undefined"},isStorageAvailable:function(){return this.storage?!0:window[this.storageEngine]!==null?(this.storage=window[this.storageEngine],!0):!1}},n=function(e,n,r){var i;return i=void 0,typeof r!="undefined"&&(r.exports=t,i=r.config()),e(function(){var e;e=t;if(!e.init(i))return!1;(n||e.isKeymasterAvailable())&&e.enableHotKeys();if(e.isStorageAvailable())return e.checkStorage()})},typeof define=="function"?define("techModuleGrid",["jquery","keymaster","module"],n):typeof $!==void 0&&n($),e.PixelGridForLayout=t})(this);